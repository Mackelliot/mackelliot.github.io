<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Perk Up, Grant! - Application Adventure</title>
  <link rel="stylesheet" href="https://unpkg.com/chessboardjs@1.0.0/dist/chessboard.min.css" />
  <style>
    body { font-family:'Open Sans',sans-serif; background:#F6EBD5; color:#2c2c2c; padding:1rem; margin:0; max-width:100%; overflow-x:hidden; box-sizing:border-box; }
    h1 { font-family:'Oswald',sans-serif; font-size:1.8rem; color:#3a2a1c; text-align:center; margin-top:1.5rem; }
    p { font-size:1.1rem; line-height:1.6; }
    .scene { display:none; animation:fadeIn .8s ease forwards; padding:1rem; }
    .scene.active { display:block; }
    .button-row { display:flex; flex-direction:column; gap:1rem; margin-top:2rem; align-items:center; }
    button { background:#3a2a1c; color:#f6ebd5; padding:1rem; font-family:'Oswald',sans-serif; font-size:1.1rem; border:none; border-radius:6px; cursor:pointer; width:80%; max-width:300px; }
    button:hover { background:#5a3a1c; }
    .scene-image { display:block; max-width:120px; height:auto; margin:1rem auto; }
    @keyframes fadeIn { from{opacity:0;transform:translateY(10px);} to{opacity:1;transform:translateY(0);} }
    #board { width:320px; margin:1rem auto; }
  </style>
</head>
<body>

<div id="scene-container">

  <div class="scene active" id="scene-1">
    <h1>☕ Welcome to the Application Process</h1>
    <p>Thank you for applying to <strong>Perk Up, Grant!</strong> We believe the best way to evaluate a potential team member is through a hyper-realistic simulation of what you might encounter on the job.</p>
    <p>You’ll be placed in a series of totally normal, definitely not exaggerated real-life workplace scenarios.</p>
    <p>Your decisions will reveal your true character. Will you survive? Will you thrive?</p>
    <div class="button-row"><button onclick="goToScene('scene-2')">Let’s Go</button></div>
  </div>

  <div class="scene" id="scene-2">
    <h1>☕ Moral Dilemma #1</h1>
    <img class="scene-image" src="scene2.PNG" alt="Coffee Spill">
    <p>You walk into your first shift and immediately spill an entire barrel of coffee beans. Your manager Grant hasn't seen it yet.</p>
    <p>Do you:</p>
    <div class="button-row">
      <button onclick="goToScene('scene-honest')">Tell the truth and accept the consequences</button>
      <button onclick="goToScene('scene-lie')">Blame it on the intern who left 10 minutes ago</button>
    </div>
  </div>

  <div class="scene" id="scene-honest">
    <h1>🕊️ Honesty Is the Best Policy?</h1>
    <img class="scene-image" src="scene-honest.PNG" alt="Honesty">
    <p>You confess, expecting rage. Instead, Grant applauds you for your integrity and says you are ready for the next challenge: dealing with the angry customer who says the espresso from his home country Italy tastes better.</p>
    <p>Do you:</p>
    <div class="button-row">
      <button onclick="goToScene('scene-help')">Accuse the Italian customer of using counterfeit currency so he gets deported back to Italy</button>
      <button onclick="goToScene('scene-run')">Get lost in the Italian’s deep eyes and agree to join him on his yacht in the Mediterranean to taste Italian coffee for yourself</button>
    </div>
  </div>

  <div class="scene" id="scene-lie">
    <h1>🤥 The Blame Game</h1>
    <img class="scene-image" src="scene-lie.PNG" alt="Lie Scene">
    <p>The manager believes you... for now. The intern returns unexpectedly with lunch for everyone. Chaos ensues.</p>
    <div class="button-row">
      <button onclick="goToScene('scene-coverup')">Double down and gaslight the intern</button>
      <button onclick="goToScene('scene-confess')">Break down and confess everything</button>
    </div>
  </div>

  <div class="scene" id="scene-help">
    <h1>👻 Haunted Grounds</h1>
    <img class="scene-image" src="scene-help.PNG" alt="Haunted Espresso">
    <p>You reach for the Italian man but your hand passes through him. He is a ghost and is threatening to haunt the espresso machine for eternity. You tell Grant you think something’s up with the machine, leave work early, and ignore Grant’s texts the rest of the month.</p>
    <p><strong>Status: Paranormally successful. Not hired.</strong></p>
    <div class="button-row">
      <button onclick="restartAdventure()">☕ Apply Again</button>
      <button onclick="window.location.href='index.html'">🏠 Return to Home</button>
    </div>
  </div>

  <div class="scene" id="scene-run">
    <h1>🛥️ Latte Love</h1>
    <img class="scene-image" src="scene-run.PNG" alt="Yacht Romance">
    <p>You hop onto a luxury yacht named The Bean Princess. On the second night, over truffle risotto and suspicious glances, the Italian man tells you his name is Lorenzo. He leans in and whispers:</p>
    <p>“I knew I could trust you the moment you pronounced ‘macchiato’ with such reckless confidence.”</p>
    <p>You’re not sure what that means, but you’re pretty sure it’s love.</p>
    <p>Turns out Lorenzo is a double agent in an international coffee smuggling ring. You’re now his partner — romantically and professionally. You help him decode secret latte art messages and smuggle biscotti microchips across borders.</p>
    <p>You get married in Tuscany in a vineyard owned by a mysterious woman named “Nonna”.</p>
    <p>You never return.</p>
    <p><strong>Status: Lost in love. Not hired.</strong></p>
    <div class="button-row">
      <button onclick="restartAdventure()">☕ Apply Again</button>
      <button onclick="window.location.href='index.html'">🏠 Return to Home</button>
    </div>
  </div>

  <div class="scene" id="scene-coverup">
    <h1>🧠 Gaslight Brew</h1>
    <img class="scene-image" src="scene-coverup.PNG" alt="Gaslight Chaos">
    <p>You tell Grant it was all the intern’s fault. But little did you know the intern was eavesdropping on your conversation. The intern pops out to counter-accuse you as the one who really spilled the beans. Thankfully for you, Grant is moral and just. He demands a trial by chess. The winner is hired and the loser is banished.</p>
    <div class="button-row">
      <button onclick="goToScene('scene-chess')">Accept trial by Chess</button>
      <button onclick="goToScene('scene-flee')">Flee the scene</button>
    </div>
  </div>

  <div class="scene" id="scene-confess">
    <h1>😢 A Frothy Redemption</h1>
    <img class="scene-image" src="scene-confess.PNG" alt="Foamy Tears">
    <p>You break down in tears and confess everything. The manager nods solemnly, then asks if you can foam milk with your tears. Turns out — you can.</p>
    <p><strong>Status: Emotionally foamy. Not hired.</strong></p>
    <div class="button-row">
      <button onclick="restartAdventure()">☕ Apply Again</button>
      <button onclick="window.location.href='index.html'">🏠 Return to Home</button>
    </div>
  </div>

  <div class="scene" id="scene-chess">
    <h1>♟️ Trial by Chess</h1>
    <p>Play against the Intern (AI). You are White and go first. Win to be hired; lose and you’re banished.</p>
    <div id="board"></div>
    <div class="button-row"><button onclick="restartAdventure()">☕ Try Again</button></div>
  </div>

  <div class="scene" id="scene-flee">
    <h1>🏃‍♂️ Flee!</h1>
    <p>You flee the cafe, spilling coffee beans in your wake. You escape—but at what cost? Probably your job.</p>
    <p><strong>Status: Cowardly escape. Not hired.</strong></p>
    <div class="button-row">
      <button onclick="restartAdventure()">☕ Apply Again</button>
      <button onclick="window.location.href='index.html'">🏠 Return to Home</button>
    </div>
  </div>

</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/1.0.0/chess.min.js"></script>
<script src="https://unpkg.com/chessboardjs@1.0.0/dist/chessboard.min.js"></script>
<script>
  let board, game = new Chess();

  function goToScene(id) {
    document.querySelectorAll('.scene').forEach(s => s.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    if (id === 'scene-chess') initChess();
  }

  function initChess() {
    game.reset();
    board = Chessboard('board', {
      position: 'start',
      draggable: true,
      onDrop: handleMove
    });
  }

  function handleMove(source, target) {
    let move = game.move({ from: source, to: target, promotion: 'q' });
    if (!move) return 'snapback';
    updateBoard();
    setTimeout(makeInternMove, 500);
  }

  function makeInternMove() {
    if (game.game_over()) return finishChess();
    let moves = game.moves();
    let move = moves[Math.floor(Math.random() * moves.length)];
    game.move(move);
    updateBoard();
    if (game.game_over()) finishChess();
  }

  function updateBoard() { board.position(game.fen()); }

  function finishChess() {
    if (game.in_checkmate()) {
      game.turn() === 'b' ? goToScene('scene-win') : goToScene('scene-lose');
    } else {
      goToScene('scene-draw');
    }
  }

  document.body.insertAdjacentHTML('beforeend', `
    <div class="scene" id="scene-win">
      <h1>🎉 You Win!</h1>
      <p>Grant shakes your hand—you’re hired! Congratulations!</p>
      <div class="button-row"><button onclick="window.location.href='index.html'">🏆 Celebrate</button></div>
    </div>
    <div class="scene" id="scene-lose">
      <h1>😞 You Lose!</h1>
      <p>The Intern checkmates you. You're banished. Better luck next time!</p>
      <div class="button-row"><button onclick="restartAdventure()">☕ Apply Again</button></div>
    </div>
    <div class="scene" id="scene-draw">
      <h1>🤝 Draw!</h1>
      <p>You draw with the Intern. Grant calls it a tie—and sends you to latte duty anyway.</p>
      <div class="button-row"><button onclick="restartAdventure()">☕ Apply Again</button></div>
    </div>
  `);

  function restartAdventure() { goToScene('scene-1'); }
</script>
</body>
</html>
